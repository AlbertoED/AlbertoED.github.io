<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>  
    {% if page.title %}
        {{ page.title }}
    {% else %}
        {{ site.title }}
    {% endif %}
    </title>
    {% if page.description %}<meta name="description" content="{{ page.description }}">{% endif %}
                


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="https://cdn.firebase.com/js/client/2.3.2/firebase.js"></script>
    <script src="{{ ASSET_PATH }}/bootstrap/js/bootstrap.min.js"></script>
    <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.0/js/bootstrap-toggle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/1.3.0/showdown.js"></script>
    <script src="{{ ASSET_PATH }}/bootstrap/js/rundown.js"></script>
    <script src="{{ ASSET_PATH }}/bootstrap/js/gitquery.js"></script>
    <script src="{{ ASSET_PATH }}/bootstrap/js/login.js"></script>
    <meta name="author" content="{{ site.author.name }}">
    <!-- Contenido necesario para usar el objeto datetimepicker -->
    <script type="text/javascript" src="{{ ASSET_PATH }}/bootstrap/js/moment-with-locales.min.js"></script>
    <script type="text/javascript" src="{{ ASSET_PATH }}/bootstrap/js/bootstrap-datetimepicker.min.js"></script>

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap styles -->
    <link href="{{ ASSET_PATH }}/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- Optional theme -->
    <link href="{{ ASSET_PATH }}/bootstrap/css/bootstrap-theme.min.css" rel="stylesheet">
    <!-- Sticky Footer -->
    <link href="{{ ASSET_PATH }}/bootstrap/css/bs-sticky-footer.css" rel="stylesheet">
    <!-- Bootstrap toggle styles -->
    <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.0/css/bootstrap-toggle.min.css" rel="stylesheet">
    <!-- Bootstrap datetimepicker styles -->
    <link href="{{ ASSET_PATH }}/bootstrap/css/bootstrap-datetimepicker.min.css" rel="stylesheet">
    <!-- Fuente google -->
    <link href='https://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>

  <!-- Codigo javascript para fijar la cabecera al hacer scroll
  <script type="text/javascript">
      $(document).ready(function(){
          $(window).bind('scroll', function() {
          var navHeight = 300; // custom nav height
          ($(window).scrollTop() > navHeight) ? $('nav').addClass('goToTop') : $('nav').removeClass('goToTop');
        });
    });
  </script>-->
    
    <!-- Custom styles -->
    <link href="{{ ASSET_PATH }}/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <!-- Update these with your own images
      <link rel="shortcut icon" href="images/favicon.ico">
      <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
      <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
      <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
    -->

    <!-- atom & rss feed -->
    <link href="{{ BASE_PATH }}{{ site.JB.atom_path }}" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="{{ BASE_PATH }}{{ site.JB.rss_path }}" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">
  {% for item in page.js %}
        {% if item == 'jquery' %}
            <script type="text/javascript" src="{{ ASSET_PATH }}/js/jquery-1.9.1.min.js"></script>
        {% endif %}
  {% endfor %}
  </head>

  <body>
    <div id="wrap">
      <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header" >
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#jb-navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>

          <a class="navbar-brand" href="{{ HOME_PATH }}"><div id="logo" class="logo-navbar adapted">
          </div></a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="jb-navbar-collapse">
          <ul class="nav navbar-nav">
          {% assign pages_list = site.pages %}
          {% assign group = 'navigation' %}
          {% include JB/pages_list %}
          </ul>
          <!-- CODIGO PARA MOSTRAR LA CATEGORIA EN EL NAV
          {% if page.description == "categories" %}
            <p>{{page.title}}</p>
          {% endif %}-->
          <form class="navbar-form navbar-right" role="search">
          <!-- Código para mostrar si se ha iniciado sesion -->
          <div style="display:none;" id="btnAdmin">
                <button type="button" class="btn btn-default dropdown-toggle"data-toggle="dropdown">
                Administrar
                <span class="glyphicon glyphicon-wrench" aria-hidden="true"></span>
                <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu">
                  <li><a href="/admin.html" ><span class="glyphicon glyphicon-list"></span>     Repositorios</a></li>
                  <li class="divider"></li>
                  <li><a href="#" data-toggle="modal" data-target="#myModalMiembros"><span class="glyphicon glyphicon-user"></span>     Miembros</a></li>
                  <li class="divider"></li>
                  <li><a href="#" data-toggle="modal" data-target="#myModalEquipos"><span class="glyphicon glyphicon-briefcase"></span>     Equipos</a></li>
                  <li class="divider"></li>
                  <li><a href="#" data-toggle="modal" data-target="#myModalInfo"><span class="glyphicon glyphicon-info-sign"></span>     Información</a></li>
                  <li class="divider"></li>
                  <li><a href="#" onclick="cerrarSesionNavbar()"><span class="glyphicon glyphicon-log-out"></span>     Log Out</a></li>

                </ul>
          </div>
                    <!-- Código para el botón del login -->
          <button type="button" class="btn btn-default margen-izdo" data-toggle="modal" id="btnLogin" data-target="#myModalLogin" onclick="$('.alert').hide()">Login</button>
          </form>
          <!-- Codigo para mostrar el nombre del usuario con sesion iniciada -->
          <form class="navbar-form navbar-right" role="search">
            <div class="lbl-user-navbar">
                <h4><span id="usuario-mail-navbar"></span></h4>
            </div>
          </form>
        </div><!-- /.navbar-collapse -->
      </nav>
      <!--<div id="logogsi">
        <img SRC="images/logo_gsi_1.png" WIDTH=178 HEIGHT=180>
      </div>-->
      <div class="container" id="container-main">
        <div class="modal-loading"></div>
          {{ content }}
        </div>
      </div>

    <div id="footer">
      <div class="container">
      <div class="row">
        <div class="col-md-6"> 
          <div align="center">      
            <p>
              Copyright  &copy; <a href="http://www.gsi.dit.upm.es/es/" target="_blank">{{ site.author.name }}</a>, {{ site.author.university }} {{ site.time | date: '%Y' }}
            </p>
          </div>
        </div>
        <div class="col-md-6">
          <div align="right">
            <a title="Canal de Youtube del GSI" target="_blank" href="https://www.youtube.com/user/gsiditupm"><img class="logos-contact" src="assets/themes/bootstrap-3/css/images/youtube-logo.png"></a>
            <a title="Twitter del GSI" target="_blank" href="https://twitter.com/gsiupm"><img class="logos-contact" src="assets/themes/bootstrap-3/css/images/twitter-logo.png"></a>
            <a title="Cuenta GitHub del GSI" target="_blank" href="https://github.com/gsi-upm"><img class="logos-contact" src="assets/themes/bootstrap-3/css/images/github-logo.png"></a>
            <a title="Localización del GSI" target="_blank" href="https://www.google.es/maps/place/GSI+-+Grupo+de+Sistemas+Inteligentes/@40.453026,-3.72569,15z/data=!4m2!3m1!1s0x0:0xb53df252f491797"><img class="logos-contact" src="assets/themes/bootstrap-3/css/images/maps-logo.png"></a>
          </div>
        </div>
      </div>
      <!-- ICONO DE SUBIR CON LA IMAGEN ADAPTADA AL TAMAÑO -->
      <a class="go-top adapted" href="#"></a>
    </div>

    {% include JB/analytics %}

  <!-- Código para el popup del Login -->
  <!-- Modal -->

    <div class="modal fade" id="myModalLogin" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">Credenciales de administrador
            <span style="display:none;" class="glyphicon glyphicon-refresh glyphicon-refresh-animate" id="loadLogin"></span>
            </h4>
          </div>
          <div class="modal-body">
            <form name="login">

              <div class="form-group">
              <label for="usr">Usuario:</label>
              <input type="text" class="form-control" name="userid" id="usr" placeholder="Introduzca el usuario" onkeypress="if (event.keyCode == 13) loginUser(this.form)">
              </div>
          <div class="form-group">
              <label for="pwd">Contraseña:</label>
              <input type="password" class="form-control" name="pswrd" id="pwd" placeholder="Introduzca la contraseña" onkeypress="if (event.keyCode == 13) loginUser(this.form)">
          </div>

              <!--Usuario: <input type="text" name="userid"/></br></br>
              Contraseña: <input type="password" name="pswrd"/> -->
          </div>
          <div class="container">
            </div>
            <!-- Contenedores que se muestran en caso de producirse error en el Login, se introducir un usuario correcto o de aviso si ya está logado -->
            <!-- MENSAJE ERROR -->
            <div class="alert alert-danger fade in" style="display:none;">
                <a href="#" class="close" onclick="$('.alert-danger').hide()">&times;</a>
                <strong>¡Error!</strong> La contraseña o el usuario no son correctos.
            </div>
        
        <!-- MENSAJE EXITO -->
          <div class="alert alert-success fade in" style="display:none;">
              <a href="#" class="close" onclick="$('.alert-success').hide()">&times;</a>
              <strong>¡Bienvenido!</strong> Usuario y contraseña correctos.
          </div>

        <!-- MENSAJE INFO YA CONECTADO -->
          <div class="alert alert-info fade in" style="display:none;">
              <a href="#" class="close" onclick="$('.alert-info').hide()">&times;</a>
              Ya has iniciado sesión como <strong><span id="usuarioInfo"></span></strong>.
          </div>

        <!-- MENSAJE FIN SESION -->
          <div class="alert alert-warning fade in" style="display:none;">
              <a href="#" class="close" onclick="$('.alert-warning').hide()"s>&times;</a>
              <strong>¡Advertencia!</strong> La sesión ha expirado.
            </div>

          <div class="modal-footer">
            <!-- BOTONES DEL MODAL -->
            <button type="button" class="btn btn-default" onclick="cerrarSesion()" style="display:none;" id="btnFinSesion">Salir de la sesión</button>
            <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
            <button type="button" class="btn btn-primary" onclick="loginUser(this.form)" value="Login">Entrar</button>
          </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Código para el popup de colaboradores -->
    <!-- Modal -->
      <div class="modal fade" id="myModalMiembros" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">Actualización de miembros
            <span style="display:none;" class="glyphicon glyphicon-refresh glyphicon-refresh-animate" id="loadLogin"></span>
            </h4>
          </div>
          <div class="modal-body">
            <p style="text-align: justify;">Para actualizar la información de los miembros de la organización haga click en actualizar. Los nuevos miembros se añadirán y los que ya no pertenezcan al grupo serán eliminados.</p>
            <p class="debug-url"></p>
          </div>
          <div class="modal-footer">
            <!-- BOTONES DEL MODAL -->
            <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
            <button type="button" class="btn btn-primary" onclick="actualizarMiembros()" value="Login">Actualizar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Código para el popup de equipos -->
    <!-- Modal -->
      <div class="modal fade" id="myModalEquipos" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">Actualización de equipos
            <span style="display:none;" class="glyphicon glyphicon-refresh glyphicon-refresh-animate" id="loadLogin"></span>
            </h4>
          </div>
          <div class="modal-body">
            <p style="text-align: justify;">Para actualizar la información de los equipos de la organización haga click en actualizar. Los nuevos equipos se añadirán y los que ya no existan serán eliminados.</p>
            <p class="debug-url"></p>
          </div>
          <div class="modal-footer">
            <!-- BOTONES DEL MODAL -->
            <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
            <button type="button" class="btn btn-primary" onclick="actualizarEquipos()" value="Login">Actualizar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Código para el popup de info -->
    <!-- Modal -->
      <div class="modal fade" id="myModalInfo" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">Actualización de equipos
            <span style="display:none;" class="glyphicon glyphicon-refresh glyphicon-refresh-animate" id="loadLogin"></span>
            </h4>
          </div>
          <div class="modal-body">
            <p style="text-align: justify;">Bienvenido al panel de administración de la web de GitHub del GSI. Desde aquí podrás controlar los contenidos que serán visibles en la web.</p></br>
            <p style="text-align: justify;">En la página de repositorios puedes asignar a cada uno una categoría de las predefinidas y decidir si será público. Además puedes modificar la descripción o escribir una personalizada en caso de no tener una. El botón GUARDAR almacenará los cambios realizados sobre los repositorios visibles en pantalla. El botón ACTUALIZAR pondrá al día todos los repositorios que ya estén guardados. Por último el botón ELIMINADOS eliminará los repositorios que hayan desaparecido de GitHub desde la última actualización.</p></br>
            <p style="text-align: justify;">Haciendo click en los apartado de Equipos y Miembros se actualizarán la información de los mismos.</p></br>
            <p style="text-align: justify;">Para cualquier duda o mejora que te gustaría incluir puedes escribir un correo a <i>alberto.esteban92@gmail.com<i>.</p></br>
            <p style="text-align: center;"><b>¡Gracias por mantener la web actualizada!</b></p></br>
            <p class="debug-url"></p>
          </div>
          <div class="modal-footer">
            <!-- BOTONES DEL MODAL -->
            <button type="button" class="btn btn-primary"data-dismiss="modal">Entendido</button>
          </div>
        </div>
      </div>
    </div>

    <!-- SAVE NOTIFICATION -->
    <div class="hidden-xs">
        <div class="notifications">
            <div class="notification ok actualizado"><p><img src="assets/themes/bootstrap-3/css/images/tick.png" style="width:14 px; height:14px;">   Actualizado correctamente</p></div> 
            <div class="notification fail actualizado">No se ha podido actualizar</div>
            <div class="notification empty eliminado"><p><img src="assets/themes/bootstrap-3/css/images/exclamacion.png" style="width:14 px; height:14px;">   No hay repositorios que eliminar</p></div>
            <div class="notification ok guardado"><p><img src="assets/themes/bootstrap-3/css/images/tick.png" style="width:14 px; height:14px;">   Guardado correctamente</p></div> 
            <div class="notification ok eliminado"><p><img src="assets/themes/bootstrap-3/css/images/tick.png" style="width:14 px; height:14px;">   Eliminados correctamente</p></div>
        </div>
    </div> 

  </body>


</html>